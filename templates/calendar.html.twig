{% extends 'article.html.twig' %}
{% block body_template_classes %}{{ parent() }} calendar{% endblock body_template_classes %}
{% block template %}
{{ parent() }}
<!-- user/plugins/photon-event/templates/calendar.html.twig -->
{% endblock %}

{% block content %}
{{ parent() }}
<script type="text/javascript">
var events = [
  {% for article in page.collection %}
    {% set startDate = article.header.data.event.startDate %}
    {% set endDate = article.header.data.event.endDate %}
    {% if startDate %}
    {
      title: "{{ article.title }}",
      start: "{{ startDate|date("Y-m-d\\TH:i") }}",
      {% if endDate %}
      end: "{{ endDate|date("Y-m-d\\TH:i") }}",
      {% endif %}
      url: "{{ article.url }}",
      className: ""
    },
    {% endif %}
  {% endfor %}
  ];
</script>
{% endblock %}
